<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <section name="WebApplication.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
    <sectionGroup name="nwebsec">
      <!-- For information on how to configure NWebsec please visit: https://docs.nwebsec.com/ -->
      <section name="httpHeaderSecurityModule" type="NWebsec.Modules.Configuration.HttpHeaderSecurityConfigurationSection, NWebsec, Version=4.2.0.0, Culture=neutral, PublicKeyToken=3613da5f958908a1" requirePermission="false" />
    </sectionGroup>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>
  <log4net>
    <appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="AppLog.txt" />
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="500KB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%d (%c:%line) %-5p - %m%n" />
      </layout>
    </appender>
    <appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
      <to value="cidmu.services@monash.edu" />
      <from value="med-bsr@monash.edu " />
      <subject value="[BSR][**DEV**]" />
      <smtpHost value="smtp.monash.edu.au" />
      <bufferSize value="512" />
      <lossy value="true" />
      <evaluator type="log4net.Core.LevelEvaluator">
        <threshold value="ERROR" />
      </evaluator>
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%d (%c:%line) %-5p - %m%n" />
      </layout>
    </appender>
    <root>
      <level value="ERROR" />
      <appender-ref ref="RollingFileAppender" />
      <appender-ref ref="SmtpAppender" />
    </root>
  </log4net>
  <appSettings>
    <add key="PROJECT_NAME" value="Bariatric Surgery Registry (BSR)" />
    <add key="PROJECT_SHORT_NAME" value="BSR" />
    <add key="PROJECT_URL" value="https://uat.cidmu.org.au/uat_BSR/" />
    <add key="ACCOUNT_REQUEST_EMAIL" value="med-bsr@monash.edu" />
    <add key="vs:EnableBrowserLink" value="false" />
    <add key="SingleSessionEnforcement" value="true" />
    <add key="CaptchaEnforcement" value="false" />
    <add key="PASSOWRD_EXPIRY_DAYS" value="180" />
    <add key="PASSWORD_RESET_FIRST_LOGIN" value="1" />
    <add key="SECURITYQUESTION_RESET_FIRST_LOGIN" value="1" />
    <add key="RECOVERY" value="cidmu" />
    <add key="RECOVERY_EMAIL" value="praveen.baswa@monash.edu" />
    <add key="EMAIL_PROJECT" value="praveen.baswa@monash.edu" />
    <add key="HELP_ROOT_PATH" value="Views/Help/" />
    <add key="HELP_IMAGE_URL" value="~/Images/help-icon-24.png" />
    <add key="LoginLockoutTimeForSession" value="15" />
    <add key="SENDMAIL" value="true" />
    <add key="MONASH_LOGO_PATH" value="C:\\Projects\\BSR\\Development\\01-Code\\App.UI.Web\\Images\\monash_logo_sml.png" />
    <add key="LTFU_EMAIL" value="praveen.baswa@monash.edu" />
    <add key="MAX_BULK_LOAD_FILE_SIZE" value="10000000" />
    <!--
    <add key="Telerik.Skin" value="Windows7" />
    <add key="Telerik.Skin" value="Metro" />
    -->
  </appSettings>
  <connectionStrings>
    <!--DEV -->
    <!--<add name="ApplicationServices" connectionString="Data Source=ocio-fc10-sql01.ad.monash.edu;Initial Catalog=MNHS-Registry-BSR-DEV;User ID=app_user_bsr;Password=A9p(s6r6sr#" providerName="System.Data.SqlClient" />
  <add name="BusinessEntities" connectionString="metadata=res://*/BusinessEntities.csdl|res://*/BusinessEntities.ssdl|res://*/BusinessEntities.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=ocio-fc10-sql01.ad.monash.edu;initial catalog=MNHS-Registry-BSR-DEV;persist security info=True;user id=app_user_bsr;password=A9p(s6r6sr#;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> -->
    <!-- G0dSaveTheQueen -->
    <!--DEV LOCAL -->
    <add name="ApplicationServices" connectionString="Data Source=.\SQL2016;Initial Catalog=MNHS-Registry-BSR-Backup;User ID=BSRi_User; Password=Adweb@123;Connection Timeout=180" providerName="System.Data.SqlClient" />
    <add name="BusinessEntities" connectionString="metadata=res://*/BusinessEntities.csdl|res://*/BusinessEntities.ssdl|res://*/BusinessEntities.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQL2016;initial catalog=MNHS-Registry-BSR-Backup;User Id=BSRi_User; Password=Adweb@123;Connection Timeout=180;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />

    <!--TEST 
    <add name="ApplicationServices" connectionString="Data Source=ocio-fc11-sql01.ad.monash.edu;Initial Catalog= MNHS-Registry-BSR-TEST;User ID=app_user_bsr;Password=A9p(s6r6sr#" providerName="System.Data.SqlClient" />
    <add name="BusinessEntities" connectionString="metadata=res://*/BusinessEntities.csdl|res://*/BusinessEntities.ssdl|res://*/BusinessEntities.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=ocio-fc11-sql01.ad.monash.edu;initial catalog=MNHS-Registry-BSR-TEST;persist security info=True;user id=app_user_bsr;password=A9p(s6r6sr#;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />		
   -->

    <!--UAT  
    <add name="ApplicationServices" connectionString="Data Source=ocio-fc11-sql01.ad.monash.edu;Initial Catalog=MNHS-Registry-BSR-UAT;User ID=app_user_bsr;Password=A9p(s6r6sr#" providerName="System.Data.SqlClient" />
    <add name="BusinessEntities" connectionString="metadata=res://*/BusinessEntities.csdl|res://*/BusinessEntities.ssdl|res://*/BusinessEntities.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=ocio-fc11-sql01.ad.monash.edu;initial catalog=MNHS-Registry-BSR-UAT;persist security info=True;user id=app_user_bsr;password=A9p(s6r6sr#;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
   -->

    <!-- DEMO
    <add name="ApplicationServices" connectionString="Data Source=ocio-fc11-sql01.ad.monash.edu;Initial Catalog=MNHS-Registry-BSR-DEMO;User ID=app_user_bsr;Password=A9p(s6r6sr#" providerName="System.Data.SqlClient" />
    <add name="BusinessEntities" connectionString="metadata=res://*/BusinessEntities.csdl|res://*/BusinessEntities.ssdl|res://*/BusinessEntities.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=ocio-fc11-sql01.ad.monash.edu;initial catalog=MNHS-Registry-BSR-DEMO;persist security info=True;user id=app_user_bsr;password=A9p(s6r6sr#;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
   -->

  </connectionStrings>
  <system.web>
    <httpRuntime enableVersionHeader="false"  executionTimeout="9999" maxRequestLength="20480"/>
    <pages>
      <controls>
        <add assembly="App.UI.Web.Control.ContextHelp" namespace="App.UI.Web.Control.ContextHelp" tagPrefix="ch" />
      </controls>
    </pages>
    <!--To uncomment debug="false" for production-->
    <!--<compilation debug="false" targetFramework="4.0">-->
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Speech, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="Microsoft.Build.Framework, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
      </assemblies>
      <buildProviders>
        <add extension=".rdlc" type="Microsoft.Reporting.RdlBuildProvider, Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
      </buildProviders>
    </compilation>
    <siteMap defaultProvider="AspNetXmlSiteMapProvider" enabled="true">
      <providers>
        <clear />
        <add name="AspNetXmlSiteMapProvider" type="System.Web.XmlSiteMapProvider, System.Web, Version=2.0.3600.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" siteMapFile="Web.sitemap" securityTrimmingEnabled="true" />
      </providers>
    </siteMap>
    <httpCookies httpOnlyCookies="true" requireSSL="false" />
    <authentication mode="Forms">
      <forms loginUrl="~/Views/Home/Login.aspx" timeout="20" />
    </authentication>
    <sessionState timeout="20" />
    <!--
    For Production 
    <customErrors mode="On" defaultRedirect="~/Views/Shared/Error.aspx" />   
    <customErrors mode="RemoteOnly" defaultRedirect="~/Views/Shared/Error.aspx" />   
    -->
    <customErrors mode="Off" />
    <membership>
      <providers>
        <clear />
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="true" requiresUniqueEmail="false" passwordFormat="Hashed" maxInvalidPasswordAttempts="3" minRequiredPasswordLength="8" minRequiredNonalphanumericCharacters="1" passwordAttemptWindow="10" applicationName="/" />
        <add name="ResetPasswordByAdmin" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" passwordFormat="Hashed" maxInvalidPasswordAttempts="3" minRequiredPasswordLength="7" minRequiredNonalphanumericCharacters="1" passwordAttemptWindow="10" passwordStrengthRegularExpression="(?=^[^\s]{7,50}$)((?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[\W_]))^.*" applicationName="/" />
      </providers>
    </membership>
    <profile defaultProvider="SqlProfileProvider" enabled="true">
      <providers>
        <remove name="AspNetSqlProfileProvider" />
        <add name="SqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
      <properties>
        <add name="FullName" type="string" />
        <add name="SystemNotification" type="bool" />
        <add name="Disabled" type="bool" />
        <add name="PasswordReset" type="bool" />
        <add name="UserWkPh" type="string" />
        <add name="UserMob" type="string" />
        <add name="LastSavedBy" type="string" />
        <add name="LastSavedDate" type="string" />
        <add name="LastSecurityQuestionChangedDate" type="DateTime" />
      </properties>
    </profile>
    <roleManager enabled="true">
      <providers>
        <clear />
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>
    <httpHandlers>
      <add path="Telerik.Web.UI.WebResource.axd" verb="*" type="Telerik.Web.UI.WebResource" validate="false" />
      <add path="Reserved.ReportViewerWebControl.axd" verb="*" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" validate="false" />
    </httpHandlers>
    <!-- The follwoing Health Monitoring configuration logs all error events -->
    <healthMonitoring enabled="true">
      <eventMappings>
        <clear />
        <!-- Log ALL error events -->
        <add name="All Errors" type="System.Web.Management.WebBaseErrorEvent" startEventCode="0" endEventCode="2147483647" />
        <!-- Log application startup/shutdown events -->
        <!--<add name="Application Events" type="System.Web.Management.WebApplicationLifetimeEvent"
             startEventCode="0" endEventCode="2147483647"/>-->
        <!--<add name="All Audits" type="System.Web.Management.WebAuditEvent"
             startEventCode="0" endEventCode="2147483647"/>-->
        <add name="Failure Audits" type="System.Web.Management.WebFailureAuditEvent" startEventCode="0" endEventCode="2147483647" />
        <add name="Request Processing Errors" type="System.Web.Management.WebRequestErrorEvent,        System.Web,Version=2.0.0.0,Culture=neutral,             PublicKeyToken=b03f5f7f11d50a3a" startEventCode="0" endEventCode="2147483647" />
      </eventMappings>
      <!--http://msdn.microsoft.com/en-us/library/ms998325.aspx-->
      <providers>
        <clear />
        <!-- Provide any customized SqlWebEventProvider information here (such as a different connection string name value -->
        <add connectionStringName="ApplicationServices" maxEventDetailsLength="1073741823" buffer="false" name="SqlWebEventProvider" type="System.Web.Management.SqlWebEventProvider" />
      </providers>
      <rules>
        <clear />
        <add name="All Errors Default" eventName="All Errors" provider="SqlWebEventProvider" profile="Default" minInstances="1" maxLimit="Infinite" minInterval="00:00:00" custom="" />
        <!--<add name="Application Events Default" eventName="Application Events"
            provider="SqlWebEventProvider" profile="Default" minInstances="1"
            maxLimit="Infinite" minInterval="00:00:00" custom="" />-->
        <!--<add name="All Audits Default" eventName="All Audits"
    provider="SqlWebEventProvider" profile="Default" minInstances="1"
    maxLimit="Infinite" minInterval="00:00:00" custom="" />-->
        <add name="Failure Audits Default" eventName="Failure Audits" provider="SqlWebEventProvider" profile="Default" minInstances="1" maxLimit="Infinite" minInterval="00:00:00" custom="" />
        <add name="Request Processing Errors Default" eventName="Request Processing Errors" provider="SqlWebEventProvider" profile="Default" minInstances="1" maxLimit="Infinite" minInterval="00:00:00" custom="" />
      </rules>
    </healthMonitoring>
    <!-- The following Health Monitoring configuration logs all error events to the Windows Event log... 
      <healthMonitoring enabled="true">
        <eventMappings>
          <clear />
          <add name="All Errors" type="System.Web.Management.WebBaseErrorEvent"
                    startEventCode="0" endEventCode="2147483647" />
        </eventMappings>

        <providers>
          <clear />
          <add name="EventLogProvider" type="System.Web.Management.EventLogWebEventProvider" />
        </providers>

        <rules>
          <clear />
          <add name="All Errors Default" eventName="All Errors" provider="EventLogProvider"
                    profile="Default" minInstances="1" maxLimit="Infinite" minInterval="00:00:00"
                    custom="" />
        </rules>
      </healthMonitoring>
      -->
    <!--  Monitoring configuration logs all error events END HERE -->
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <add name="Telerik_Web_UI_WebResource_axd" verb="*" preCondition="integratedMode" path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource" />
      <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
    </handlers>
    <defaultDocument>
      <files>
        <add value="Views/Home/Login.aspx" />
      </files>
    </defaultDocument>
    <httpProtocol>
      <customHeaders>
        <!--<add name="Content-Security-Policy" value="default-src 'self';" /> 
        <add name="Strict-Transport-Security" value="max-age=31536000" />
        <add name="X-Frame-Options" value="SAMEORIGIN" />        
        <add name="X-Xss-Protection" value="1; mode=block" />
        <add name="X-Content-Type-Options" value="nosniff" />-->
        <clear />
      </customHeaders>
    </httpProtocol>
    <security>
      <requestFiltering>
        <hiddenSegments>
          <add segment="NWebsecConfig" />
        </hiddenSegments>
      </requestFiltering>
    </security>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="NWebsecHttpHeaderSecurityModule" type="NWebsec.Modules.HttpHeaderSecurityModule, NWebsec, Version=4.2.0.0, Culture=neutral, PublicKeyToken=3613da5f958908a1" />
    </modules>
  </system.webServer>
  <system.net>
    <mailSettings>
      <smtp from="med-bsr@monash.edu">
        <network host="smtp.adweb.adweb.com.au" password="" userName="" />
      </smtp>
    </mailSettings>
  </system.net>
  <nwebsec>
    <httpHeaderSecurityModule xmlns="http://nwebsec.com/HttpHeaderSecurityModuleConfig.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="NWebsecConfig/HttpHeaderSecurityModuleConfig.xsd">
      <securityHttpHeaders>
        <content-Security-Policy enabled="true">
        </content-Security-Policy>
        <x-XSS-Protection policy="FilterEnabled" blockMode="true" />
        <x-Content-Type-Options enabled="true" />
        <x-Frame-Options policy="SameOrigin"/>
        <strict-Transport-Security max-age="365" />
      </securityHttpHeaders>
      <setNoCacheHttpHeaders enabled="true"/>

    </httpHeaderSecurityModule>
  </nwebsec>

</configuration>